:root {
  --bg: #f5f7fa;
  --bg-alt: #ffffff;
  --text: #1e2330;
  --text-dim: #5a6475;
  --primary: #2563eb;
  --primary-hover: #1d4ed8;
  --warn: #d97706;
  --danger: #dc2626;
  --radius: 14px;
  --border: #e2e8f0;
  --shadow: 0 4px 10px -2px rgba(0,0,0,.08);
  --progress: linear-gradient(90deg,#2563eb,#3b82f6);
  --font: 'Inter', system-ui, Arial, sans-serif;
  --field-bg: #f1f5f9;
  --field-bg-alt: #e2e8f0;
  --field-border: #d0d7e2;
  --focus-ring: 0 0 0 3px #2563eb33, 0 0 0 1px var(--primary);
}
:root.dark {
  --bg: #0f141b;
  --bg-alt: #1f2933;
  --text: #e5ecf5;
  --text-dim: #92a2b6;
  --primary: #3b82f6;
  --primary-hover: #2563eb;
  --warn: #f59e0b;
  --danger: #f87171;
  --border: #2c3947;
  --shadow: 0 4px 16px -4px rgba(0,0,0,.6);
  --progress: linear-gradient(90deg,#3b82f6,#60a5fa);
  --field-bg: #243140;
  --field-bg-alt: #2c3a48;
  --field-border: #334554;
  --focus-ring: 0 0 0 3px #3b82f633, 0 0 0 1px var(--primary);
}
* { box-sizing:border-box; }
body { margin:0; font-family:var(--font); background:var(--bg); color:var(--text); -webkit-font-smoothing:antialiased; }
.topbar { display:flex; align-items:center; justify-content:space-between; padding:10px 18px; background:var(--bg-alt); border-bottom:1px solid var(--border); position:sticky; top:0; z-index:20; }
.brand { font-size:1.05rem; font-weight:600; letter-spacing:.5px; }
.actions { display:flex; gap:6px; }
main { padding:16px clamp(8px,3vw,40px) 64px; }
.summary { display:flex; flex-wrap:wrap; gap:10px; margin:0 0 18px; }
.pill { background:var(--bg-alt); padding:8px 14px; border-radius:999px; font-size:.8rem; border:1px solid var(--border); box-shadow:var(--shadow); }
.grid { display:grid; gap:20px; grid-template-columns:repeat(auto-fill,minmax(260px,1fr)); }
.card { background:var(--bg-alt); border:1px solid var(--border); padding:16px 16px 18px; border-radius:var(--radius); box-shadow:var(--shadow); display:flex; flex-direction:column; gap:12px; position:relative; transition:transform .15s ease, box-shadow .15s ease; }
.card.running { outline:2px solid #10b98133; }
.card:hover { transform:translateY(-4px); box-shadow:0 8px 24px -6px rgba(0,0,0,.15); }
.card-head { display:flex; align-items:center; justify-content:space-between; gap:12px; }
.card-head h3 { margin:0; font-size:1.05rem; }
.badge { font-size:.65rem; padding:4px 8px; border-radius:8px; text-transform:uppercase; letter-spacing:.5px; font-weight:600; }
.badge.live { background:#10b98122; color:#047857; }
.badge.idle { background:#64748b22; color:#475569; }
.dark .badge.live { background:#04785766; color:#34d399; }
.dark .badge.idle { background:#47556966; color:#94a3b8; }
.progress-wrap { height:46px; background:linear-gradient(135deg,#e2e8f0,#f1f5f9); border-radius:10px; position:relative; overflow:hidden; border:1px solid var(--border); display:flex; align-items:center; }
.dark .progress-wrap { background:#1c2530; }
.progress-bar { position:absolute; left:0; top:0; bottom:0; background:var(--progress); transition:width .6s cubic-bezier(.4,.0,.2,1); }
.progress-text { width:100%; text-align:center; font-size:.75rem; font-weight:600; color:var(--text-dim); position:relative; }
.last-tx { font-size:.7rem; line-height:1.3; color:var(--text); background:linear-gradient(135deg,var(--bg-alt) 0%,var(--bg) 120%); padding:10px 12px 12px; border-radius:14px; border:1px solid var(--border); display:flex; flex-direction:column; gap:6px; position:relative; overflow:hidden; }
.card.running .last-tx { border-color:#10b98155; box-shadow:inset 0 0 0 1px #10b98133; }
.last-tx:before { content:""; position:absolute; inset:0; background:radial-gradient(circle at 85% 15%, rgba(37,99,235,.18), transparent 60%); opacity:.55; pointer-events:none; }
.tx-row { display:flex; justify-content:space-between; align-items:center; gap:10px; }
.tx-time { font-weight:600; font-size:.78rem; letter-spacing:.3px; }
.tx-amount { background:var(--primary); color:#fff; padding:4px 10px; border-radius:999px; font-size:.65rem; font-weight:600; box-shadow:0 2px 6px -2px rgba(0,0,0,.3); }
.card.running .tx-amount { background:#0d9488; }
.tx-meta { display:flex; justify-content:space-between; font-size:.58rem; opacity:.8; letter-spacing:.3px; }
.tx-meta span { white-space:nowrap; }
.last-empty { font-style:italic; font-size:.65rem; color:var(--text-dim); text-align:center; padding:4px 0 2px; }
.duration-input { display:flex; flex-direction:column; gap:6px; }
.duration-input label { display:flex; justify-content:space-between; align-items:center; font-size:.7rem; gap:8px; font-weight:500; }
.duration-input input { width:90px; padding:6px 8px; border:1px solid var(--border); background:var(--bg); color:var(--text); border-radius:8px; font-size:.8rem; }
.duration-input input:focus { outline:2px solid var(--primary); outline-offset:1px; }
.quick { display:flex; flex-wrap:wrap; gap:6px; }
.controls { display:grid; grid-template-columns:repeat(auto-fit,minmax(90px,1fr)); gap:8px; }
.btn { --h:38px; appearance:none; border:none; cursor:pointer; line-height:1; font-size:.72rem; font-weight:600; padding:10px 12px; border-radius:10px; background:var(--bg-alt); color:var(--text); border:1px solid var(--border); display:inline-flex; align-items:center; justify-content:center; gap:6px; transition:background .2s, color .2s, box-shadow .2s, transform .15s; }
.btn:hover { background:#f0f5ff; }
.dark .btn:hover { background:#243140; }
.btn:active { transform:translateY(1px); }
.btn.primary { background:var(--primary); color:#fff; border-color:var(--primary); }
.btn.primary:hover { background:var(--primary-hover); }
.btn.warn { background:var(--warn); color:#fff; border-color:var(--warn); }
.btn.warn:hover { filter:brightness(.9); }
.btn.danger { background:var(--danger); color:#fff; border-color:var(--danger); }
.btn.danger:hover { filter:brightness(.9); }
.btn.ghost { background:transparent; }
.btn.sm { --h:30px; padding:6px 10px; font-size:.6rem; }
.hist-btn { font-size:.6rem; }
.table { width:100%; border-collapse:collapse; font-size:.7rem; }
.table th, .table td { padding:6px 6px; text-align:left; border-bottom:1px solid var(--border); }
.table th { background:var(--bg); position:sticky; top:0; z-index:1; }
.modal-backdrop { position:fixed; inset:0; background:rgba(0,0,0,.55); display:flex; align-items:flex-start; justify-content:center; padding:40px 20px; overflow:auto; }
.modal { background:var(--bg-alt); border-radius:20px; padding:22px 26px 30px; width:min(820px,100%); max-height:90vh; box-shadow:0 10px 40px -8px rgba(0,0,0,.3); border:1px solid var(--border); animation:pop .35s cubic-bezier(.4,0,.2,1); }
.modal h3 { margin:0 0 14px; font-size:1rem; }
.close { background:var(--bg); border:1px solid var(--border); color:var(--text-dim); font-size:.75rem; padding:4px 8px; border-radius:8px; cursor:pointer; float:right; }
.close:hover { background:#ef444433; }
.form { display:flex; flex-direction:column; gap:14px; }
.form label { font-size:.65rem; text-transform:uppercase; letter-spacing:.5px; font-weight:600; color:var(--text-dim); display:flex; flex-direction:column; gap:6px; }
.form input[type=text], .form input[type=password], .form input[type=number], .form select, .form textarea {
  appearance:none;
  background:linear-gradient(145deg,var(--field-bg),var(--field-bg-alt));
  border:1px solid var(--field-border);
  padding:10px 12px;
  border-radius:12px;
  font-size:.78rem;
  font-family:inherit;
  color:var(--text);
  transition:border-color .25s, background .25s, box-shadow .25s;
  min-width:0;
}
.form input::placeholder, .form textarea::placeholder { color:var(--text-dim); opacity:.6; }
.form input:focus, .form select:focus, .form textarea:focus { outline:none; box-shadow:var(--focus-ring); border-color:var(--primary); }
.form small { font-size:.58rem; color:var(--text-dim); font-weight:400; letter-spacing:.3px; }
.form .inline { display:flex; gap:12px; }
.form .inline > * { flex:1; }
.form .actions-row { display:flex; justify-content:flex-end; gap:8px; margin-top:4px; }
.current-rate { cursor:pointer; }
.current-rate:hover { text-decoration:underline; }
.price-edit-btn { font-size:.55rem; }
.rate-snap { font-weight:500; }
.editable-rate { cursor:pointer; }
.editable-rate:active { transform:scale(.96); }
.foot { padding:16px 24px 40px; text-align:center; font-size:.65rem; color:var(--text-dim); }
@media (max-width:600px){
  .grid { grid-template-columns:repeat(auto-fill,minmax(200px,1fr)); }
  .card { padding:14px 14px 16px; }
  .controls { grid-template-columns:repeat(2,minmax(0,1fr)); }
  .btn { font-size:.68rem; }
}
@keyframes pop { from { transform:translateY(8px) scale(.98); opacity:0; } to { transform:translateY(0) scale(1); opacity:1; } }
::-webkit-scrollbar { width:10px; height:10px; }
::-webkit-scrollbar-track { background:var(--bg); }
::-webkit-scrollbar-thumb { background:#c2cbd6; border-radius:20px; }
:root.dark ::-webkit-scrollbar-thumb { background:#334453; }
